WITH DomainChildren AS
         (SELECT PORTAL_REFERER_DOMAIN_ID
               , PORTAL_REFERER_DOMAIN_PARENT_ID
          FROM dbo.PORTAL_REFERER_DOMAIN
          WHERE PORTAL_REFERER_DOMAIN_ID = @parentId
          UNION ALL
          SELECT d.PORTAL_REFERER_DOMAIN_ID
               , d.PORTAL_REFERER_DOMAIN_PARENT_ID
          FROM dbo.PORTAL_REFERER_DOMAIN as d
                   INNER JOIN DomainChildren d2 on d.PORTAL_REFERER_DOMAIN_PARENT_ID = d2.PORTAL_REFERER_DOMAIN_ID)

INSERT
@ret
(
domainId
)
SELECT PORTAL_REFERER_DOMAIN_ID
FROM DomainChildren;